{"version":3,"file":"index.pack.js","sourceRoot":"","sources":["index.pack.js"],"sections":[{"offset":{"line":186,"column":0},"map":{"version":3,"file":"index.js","sourceRoot":"","sources":["../coffee/index.coffee"],"names":[],"mappings":";AAAA;EAAA,OAAA,CAAQ,aAAR;AAAA","sourcesContent":["require './view-tree'"]}},{"offset":{"line":197,"column":0},"map":{"version":3,"file":"view-tree.js","sourceRoot":"","sources":["../coffee/view-tree.coffee"],"names":[],"mappings":"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","sourcesContent":["ViewTree = require '../../src/js/view-tree'\nNode     = ViewTree.Node\n\n\ngetTag  = (tag)  -> document.createElement  tag\ngetText = (text) -> document.createTextNode text\n\nclass MyValidNode extends Node\n    render: () -> tag: 'div'\n\nclass MyTextNode1 extends Node\n    render: () -> 'text'\n\nclass MyTextNode2 extends Node\n    render: () -> text: 'text'\n\nclass MyExtendedNode extends Node\n\n\n\nupdateNode    = (node) -> node.updateNow() if Node.isNot node.view\nexpectClass   = (node, clazz) -> expect(node.constructor).to.equal clazz\nexpectExtends = (node, clazz) -> expect(node).to.be.instanceof clazz\n\n\nexpectTextNode = (node, clazz, text) ->\n    updateNode    node\n    expectClass   node, clazz\n    expectExtends node.view, Text\n    expect(node.kind).to.equal Node.TEXT_KIND\n    expect(node.view.nodeValue).to.equal text + ''\n    expect(node.text).to.equal text\n\nexpectTagNode = (node, clazz, tag) ->\n    updateNode    node\n    expectClass   node, clazz\n    expectExtends node.view, HTMLElement\n    expect(node.kind).to.equal Node.TAG_KIND\n    expect(node.view.nodeName.toLowerCase()).to.equal tag\n    expect(node.tag).to.equal tag\n\nexpectAttr = (node, name, value) ->\n    expectExtends node.view, HTMLElement\n    expect(node.kind).to.equal Node.TAG_KIND\n    expect(node.attrs[name]).to.equal value = Node.getOrCall value\n    expect(node.view.getAttribute(name)).to.equal value + ''\n\n\nexpectBoolAttr = (node, name, value) ->\n    updateNode node\n    expectExtends node.view, HTMLElement\n    expect(node.attrs[name]).to.equal value = Node.getOrCall value\n    if value == true\n        expect(node.view.getAttribute(name)).to.equal ''\n        expect(node.view[name]).to.equal value\n    else\n        expect(node.view.getAttribute(name)).to.equal null\n        expect(node.view[name]).to.equal value\n\n\n\n\n\n\n\n\n#     0000000  00000000   00000000   0000000   000000000  00000000\n#    000       000   000  000       000   000     000     000\n#    000       0000000    0000000   000000000     000     0000000\n#    000       000   000  000       000   000     000     000\n#     0000000  000   000  00000000  000   000     000     00000000\n\ndescribe 'Node', () ->\n\n    describe '.create', () ->\n\n        it \"should return a valid text node, if cfg = 'text'\", () ->\n            expectTextNode Node.create('text'), Node, 'text'\n\n        it \"should return a valid text node, if cfg = Text\", () ->\n            expectTextNode Node.create(getText('text')), Node, 'text'\n\n        it \"should return a valid text node, if cfg.text = 'text'\", () ->\n            expectTextNode Node.create(text: 'text'), Node, 'text'\n\n        it \"should return a valid text node, if cfg.tag = Text\", () ->\n            expectTextNode Node.create(tag: getText('text')), Node, 'text'\n\n        it \"should return a valid text node, if cfg.clazz = MyTextNode1\", () ->\n            expectTextNode Node.create(clazz: MyTextNode1), MyTextNode1, 'text'\n\n        it \"should return a valid text node, if cfg.clazz = MyTextNode2\", () ->\n            expectTextNode Node.create(clazz: MyTextNode2), MyTextNode2, 'text'\n\n        it \"should return a valid tag node, if cfg = HTMLELement\", () ->\n            expectTagNode Node.create(getTag('div')), Node, 'div'\n\n        it \"should return a valid tag node, if cfg.tag = 'div'\", () ->\n            expectTagNode Node.create(tag:'div'), Node, 'div'\n\n        it \"should return a valid tag node, if cfg.tag = HTMLELement\", () ->\n            expectTagNode Node.create(tag: getTag('div')), Node, 'div'\n\n        it \"should return a valid tag node, if cfg.tag = MyValidNode\", () ->\n            expectTagNode Node.create(tag: MyValidNode), MyValidNode, 'div'\n\n        it \"should return a valid tag node, if cfg.clazz = MyValidNode\", () ->\n            expectTagNode Node.create(clazz: MyValidNode), MyValidNode, 'div'\n\n        it \"should throw an error, if cfg = null\", () ->\n            expect(() -> Node.create()).to.throw()\n\n        it \"should throw an error, if neither tag nor text are set\", () ->\n            expect(() -> Node.create()).to.throw()\n\n        it \"should throw an error, if cfg.tag = MyExtendedNode\", () ->\n            expect(() -> Node.create(tag: MyExtendedNode)).to.throw()\n\n        it \"should throw an error, if cfg.tag is invalid\", () ->\n            expect(() -> Node.create(tag: 1)).to.throw()\n            expect(() -> Node.create(tag: true)).to.throw()\n            expect(() -> Node.create(tag: {})).to.throw()\n            expect(() -> Node.create(tag: [])).to.throw()\n            expect(() -> Node.create(tag: () ->)).to.throw()\n\n        it \"should throw an error, if cfg.text is invalid\", () ->\n            expect(() -> Node.create(text: null)).to.throw()\n            expect(() -> Node.create(text: {})).to.throw()\n            expect(() -> Node.create(text: [])).to.throw()\n            expect(() -> Node.create(text: () ->)).to.throw()\n            expect(() -> Node.create(text: () -> {})).to.throw()\n            expect(() -> Node.create(text: () -> [])).to.throw()\n\n        it \"should throw an error, if cfg.clazz = MyExtendedNode, because neither tag nor text are set\", () ->\n            expect(() -> Node.create(clazz: MyExtendedNode)).to.throw()\n\n        it \"should not throw an error, if cfg.clazz = MyExtendedNode and tag = 'div'\", () ->\n            Node.create({tag: 'div', clazz: MyExtendedNode})\n            expect(() -> Node.create({tag: 'div', clazz: MyExtendedNode})).to.not.throw()\n\n        it \"should not throw an error, if cfg.clazz = MyExtendedNode and text = ''\", () ->\n            expect(() -> Node.create({text: '', clazz: MyExtendedNode})).to.not.throw()\n\n        it \"should not throw an error, if cfg.text is valid\", () ->\n            expect(() -> expectTextNode Node.create(text: ''),         Node, '')  .to.not.throw()\n            expect(() -> expectTextNode Node.create(text: 1),          Node, 1)   .to.not.throw()\n            expect(() -> expectTextNode Node.create(text: true),       Node, true).to.not.throw()\n            expect(() -> expectTextNode Node.create(text: () -> ''),   Node, '')  .to.not.throw()\n            expect(() -> expectTextNode Node.create(text: () -> 1),    Node, 1)   .to.not.throw()\n            expect(() -> expectTextNode Node.create(text: () -> true), Node, true).to.not.throw()\n\n\n\n\n#    000   000  00000000  000   000        000   000   0000000   0000000    00000000\n#    0000  000  000       000 0 000        0000  000  000   000  000   000  000\n#    000 0 000  0000000   000000000        000 0 000  000   000  000   000  0000000\n#    000  0000  000       000   000        000  0000  000   000  000   000  000\n#    000   000  00000000  00     00        000   000   0000000   0000000    00000000\n\ndescribe 'new Node', () ->\n\n    describe 'init', () ->\n\n        it \"should return a valid text node, if cfg = 'text'\", () ->\n            expectTextNode new Node('text'), Node, 'text'\n\n        it \"should return a valid text node, if cfg = Text\", () ->\n            expectTextNode new Node(getText('text')), Node, 'text'\n\n        it \"should return a valid text node, if cfg.text = 'text'\", () ->\n            expectTextNode new Node(text: 'text'), Node, 'text'\n\n        it \"should return a valid text node, if cfg.tag = Text\", () ->\n            expectTextNode new Node(tag: getText('text')), Node, 'text'\n\n        it \"should return a valid tag node, if cfg = HTMLELement\", () ->\n            expectTagNode new Node(getTag('div')), Node, 'div'\n\n        it \"should return a valid tag node, if cfg.tag = 'div'\", () ->\n            expectTagNode new Node(tag:'div'), Node, 'div'\n\n        it \"should return a valid tag node, if cfg.tag = HTMLELement\", () ->\n            expectTagNode new Node(tag: getTag('div')), Node, 'div'\n\n    describe 'init error', () ->\n        it \"should throw an error, if cfg = null\", () ->\n            expect(() -> updateNow(new Node())).to.throw()\n\n        it \"should throw an error, if neither tag nor text are set\", () ->\n            expect(() -> updateNow(new Node {})).to.throw()\n\n        it \"should throw an error, if cfg.tag is invalid\", () ->\n            expect(() -> updateNow(new Node tag: 1)).to.throw()\n            expect(() -> updateNow(new Node tag: true)).to.throw()\n            expect(() -> updateNow(new Node tag: {})).to.throw()\n            expect(() -> updateNow(new Node tag: [])).to.throw()\n            expect(() -> updateNow(new Node tag: () ->)).to.throw()\n            expect(() -> updateNow(new Node tag: Node)).to.throw()\n\n        it \"should throw an error, if cfg.text is invalid\", () ->\n            expect(() -> updateNow(new Node text: null)).to.throw()\n            expect(() -> updateNow(new Node text: {})).to.throw()\n            expect(() -> updateNow(new Node text: [])).to.throw()\n            expect(() -> updateNow(new Node text: () ->)).to.throw()\n            expect(() -> updateNow(new Node text: () -> {})).to.throw()\n            expect(() -> updateNow(new Node text: () -> [])).to.throw()\n\n        it \"should not throw an error, if cfg.text is valid\", () ->\n            expect(() -> expectTextNode new Node(text: ''),         Node, '')   .to.not.throw()\n            expect(() -> expectTextNode new Node(text: 1),          Node, 1)   .to.not.throw()\n            expect(() -> expectTextNode new Node(text: true),       Node, true).to.not.throw()\n            expect(() -> expectTextNode new Node(text: () -> ''),   Node, '')  .to.not.throw()\n            expect(() -> expectTextNode new Node(text: () -> 1),    Node, 1)   .to.not.throw()\n            expect(() -> expectTextNode new Node(text: () -> true), Node, true).to.not.throw()\n\n    describe 'with attr', () ->\n\n        it \"should create a attr title = 'my title'\", () ->\n            cfg = tag: 'div', title: 'my title'\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectAttr node, 'title', 'my title'\n\n    describe 'with bool', () ->\n\n        it \"should create a bool attr disabled = true\", () ->\n            cfg = tag: 'div', disabled: true\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectBoolAttr node, 'disabled', true\n\n        it \"should create a bool attr disabled = false\", () ->\n            cfg = tag: 'div', disabled: false\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectBoolAttr node, 'disabled', false\n\n        it \"should remove a bool attr disabled = undefined\", () ->\n            cfg = tag: 'div', disabled: undefined\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectBoolAttr node, 'disabled', undefined\n\n    describe 'with tag children', () ->\n\n        it \"should add a child tag node if children = [tag: 'div']\", () ->\n            cfg = tag: 'div', children: [tag: 'div']\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectTagNode node.children[0], Node, 'div'\n\n        it \"should add a child tag node with class MyExtendedNode if children = [{tag: 'div', clazz:MyExtendedNode}]\", () ->\n            cfg = tag: 'div', children: [{tag: 'div', clazz:MyExtendedNode}]\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectTagNode node.children[0], MyExtendedNode, 'div'\n\n        it \"should add a child tag node if children = [HTMLElement]\", () ->\n            cfg = tag: 'div', children: [getTag 'div']\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectTagNode node.children[0], Node, 'div'\n\n        it \"should add a child tag node if children = [tag:HTMLElement]\", () ->\n            cfg = tag: 'div', children: [tag:getTag 'div']\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectTagNode node.children[0], Node, 'div'\n\n        it \"should add a child tag node with class MyExtendedNode if children = [{tag: HTMLElement, clazz:MyExtendedNode}]\", () ->\n            cfg = tag: 'div', children: [{tag: getTag('div'), clazz:MyExtendedNode}]\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectTagNode node.children[0], MyExtendedNode, 'div'\n\n    describe 'with tag child', () ->\n        it \"should add a child tag node if child = tag: 'div'\", () ->\n            cfg = tag: 'div', child: tag: 'div'\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectTagNode node.children[0], Node, 'div'\n\n        it \"should add a child tag node if child = HTMLElement\", () ->\n            cfg = tag: 'div', child: getTag 'div'\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectTagNode node.children[0], Node, 'div'\n\n        it \"should add a child tag node if child = tag: HTMLElement\", () ->\n            cfg = tag: 'div', child: tag: getTag 'div'\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectTagNode node.children[0], Node, 'div'\n\n     describe 'with text children', () ->\n\n        it \"should add a child text node if children = 'my text'\", () ->\n            cfg = tag: 'div', children: 'my text'\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectTextNode node.children[0], Node, 'my text'\n\n        it \"should add a child text node if children = ['my text']\", () ->\n            cfg = tag: 'div', children: ['my text']\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectTextNode node.children[0], Node, 'my text'\n\n        it \"should add a child text node if children = [Text]\", () ->\n            cfg = tag: 'div', children: [getText 'my text']\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectTextNode node.children[0], Node, 'my text'\n\n        it \"should add a child text node if children = [text:'my text']\", () ->\n            cfg = tag: 'div', children: [text:'my text']\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectTextNode node.children[0], Node, 'my text'\n\n        it \"should add a child text node with class MyExtendedNode if children = [{text:'my text', clazz:MyExtendedNode}]\", () ->\n            cfg = tag: 'div', children: [text:'my text', clazz:MyExtendedNode]\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectTextNode node.children[0], MyExtendedNode, 'my text'\n\n        it \"should add a child text node with class MyExtendedNode if children = [{tag:Text, clazz:MyExtendedNode}]\", () ->\n            cfg = tag: 'div', children: [tag:getText('my text'), clazz:MyExtendedNode]\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectTextNode node.children[0], MyExtendedNode, 'my text'\n\n    describe 'with text', () ->\n\n        it \"should add a child text node if text = 'my text'\", () ->\n            cfg = tag: 'div', text: 'my text'\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectTextNode node.children[0], Node, 'my text'\n\n        it \"should add a child text node if text = Text\", () ->\n            cfg = tag: 'div', text: getText 'my text'\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectTextNode node.children[0], Node, 'my text'\n\n    describe 'with text child', () ->\n\n        it \"should add a child text node if child = 'my text'\", () ->\n            cfg = tag: 'div', child: 'my text'\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectTextNode node.children[0], Node, 'my text'\n\n        it \"should add a child text node if child = text:'my text'\", () ->\n            cfg = tag: 'div', child: text: 'my text'\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectTextNode node.children[0], Node, 'my text'\n\n        it \"should add a child text node if child = Text\", () ->\n            cfg = tag: 'div', child: getText 'my text'\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectTextNode node.children[0], Node, 'my text'\n\n        it \"should add a child text node if child = tag: Text\", () ->\n            cfg = tag: 'div', child: tag: getText 'my text'\n            expectTagNode node = new Node(cfg), Node, 'div'\n            expectTextNode node.children[0], Node, 'my text'\n\n\n\n\n\n\n\n\n#    000  000   000   0000000  000000000   0000000   000   000   0000000  00000000\n#    000  0000  000  000          000     000   000  0000  000  000       000\n#    000  000 0 000  0000000      000     000000000  000 0 000  000       0000000\n#    000  000  0000       000     000     000   000  000  0000  000       000\n#    000  000   000  0000000      000     000   000  000   000   0000000  00000000\n\ndescribe 'node instance', () ->\n\n    describe 'appendTo', () ->\n\n        it 'should append the nodes view to the dom', () ->\n            parent = getTag 'div'\n            node   = new Node tag:'div'\n            node.appendTo parent\n            expect(parent.childNodes[0]).to.equal node.view\n            expect(parent.childNodes.length).to.equal 1\n\n        it 'should throw an error if the dom is controlled by a node', () ->\n            parent = new Node tag:'div'\n            node   = new Node tag:'div'\n            expect(() -> node.appendTo parent.view).to.throw()\n\n        it 'should not throw an error if Node.CHECK_DOM = false', () ->\n            Node.CHECK_DOM = false\n            parent = new Node tag:'div'\n            node   = new Node tag:'div'\n            expect(() -> node.appendTo parent.updateNow().view).to.not.throw()\n            Node.CHECK_DOM = true\n\n\n    describe 'behind', () ->\n\n        it 'should append the nodes view behind the dom', () ->\n            parent = getTag 'div'\n            node   = new Node tag:'div'\n            parent.appendChild getTag 'div'\n            parent.appendChild prev = getTag 'div'\n            parent.appendChild getTag 'div'\n            node.behind prev\n            expect(parent.childNodes[2]).to.equal node.view\n            expect(parent.childNodes.length).to.equal 4\n\n        it 'should append the nodes view behind the dom if the dom is the last child', () ->\n            parent = getTag 'div'\n            node   = new Node tag:'div'\n            parent.appendChild getTag 'div'\n            parent.appendChild getTag 'div'\n            parent.appendChild prev = getTag 'div'\n            node.behind prev\n            expect(parent.childNodes[3]).to.equal node.view\n            expect(parent.childNodes.length).to.equal 4\n\n        it 'should throw an error if the doms parent is controlled by a node', () ->\n            parent = new Node tag:'div'\n            node   = new Node tag:'div'\n            parent.updateNow().view.appendChild prev = getTag 'div'\n            expect(() -> node.behind prev).to.throw()\n\n        it 'should not throw an error if Node.CHECK_DOM = false', () ->\n            Node.CHECK_DOM = false\n            parent = new Node tag:'div'\n            node   = new Node tag:'div'\n            parent.updateNow().view.appendChild prev = getTag 'div'\n            expect(() -> node.behind prev).to.not.throw()\n            Node.CHECK_DOM = true\n\n\n    describe 'before', () ->\n\n        it 'should prepand the nodes view before the dom', () ->\n            parent = getTag 'div'\n            node   = new Node tag:'div'\n            parent.appendChild getTag 'div'\n            parent.appendChild next = getTag 'div'\n            node.before next\n            expect(parent.childNodes[1]).to.equal node.view\n            expect(parent.childNodes.length).to.equal 3\n\n        it 'should throw an error if the doms parent is controlled by a node', () ->\n            parent = new Node tag:'div'\n            node   = new Node tag:'div'\n            parent.updateNow().view.appendChild next = getTag 'div'\n            expect(() -> node.before next).to.throw()\n\n        it 'should not throw an error if Node.CHECK_DOM = false', () ->\n            Node.CHECK_DOM = false\n            parent = new Node tag:'div'\n            node   = new Node tag:'div'\n            parent.updateNow().view.appendChild next = getTag 'div'\n            expect(() -> node.before next).to.not.throw()\n            Node.CHECK_DOM = true\n\n\n    describe 'replace', () ->\n\n        it 'should replace the dom with the nodes view', () ->\n            parent = getTag 'div'\n            node   = new Node tag:'div'\n            parent.appendChild old = getTag 'div'\n            node.replace old\n            expect(parent.childNodes[0]).to.equal node.view\n            expect(parent.childNodes.length).to.equal 1\n\n        it 'should throw an error if the doms parent is controlled by a node', () ->\n            parent = new Node tag:'div'\n            node   = new Node tag:'div'\n            parent.updateNow().view.appendChild old = getTag 'div'\n            expect(() -> node.replace old).to.throw()\n\n        it 'should not throw an error for the doms parent if Node.CHECK_DOM = false', () ->\n            Node.CHECK_DOM = false\n            parent = new Node tag:'div'\n            node   = new Node tag:'div'\n            parent.updateNow().view.appendChild old = getTag 'div'\n            expect(() -> node.replace old).to.not.throw()\n            Node.CHECK_DOM = true\n\n        it 'should throw an error if the dom is controlled by a node', () ->\n            parent = getTag 'div'\n            node   = new Node tag:'div'\n            parent.appendChild old = (new Node tag:'div').updateNow().view\n            expect(() -> node.replace old).to.throw()\n\n        it 'should not throw an error for the dom if Node.CHECK_DOM = false', () ->\n            Node.CHECK_DOM = false\n            parent = getTag 'div'\n            node   = new Node tag:'div'\n            parent.appendChild old = (new Node tag:'div').updateNow().view\n            expect(() -> node.replace old).to.not.throw()\n            Node.CHECK_DOM = true\n\n\n"]}},{"offset":{"line":1163,"column":0},"map":{"version":3,"file":"../../src/js/view-tree.js","sourceRoot":"","sources":["../../src/coffee/view-tree.coffee"],"names":[],"mappings":"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","sourcesContent":["__id__ = 0\n\n\nTEXT_KIND = 0\nNODE_KIND = 1\n\n\nCOMP_CFG_ERROR = 'Cfg for creating a node must either be a string or an object containing a tag property as not empty string or a node class.'\nVIEW_CFG_ERROR = 'Cfg for creating a view must either be a string or an object containing a tag property as not empty string'\n\ngetOrCall   = (value) -> if isFunc(value) then value() else value\nisBool      = (value) -> typeof value == 'boolean'\nisNumber    = (value) -> typeof value == 'number'\nisString    = (value) -> typeof value == 'string' or value == value + ''\nisObject    = (value) -> typeof value == 'object'\nisFunc      = (value) -> typeof value == 'function'\nisDom       = (value) -> value instanceof HTMLElement\nisDomText   = (value) -> value instanceof Text\nisNot       = (value) -> value == null or value == undefined\nisSimple    = (value) -> (t = typeof value) == 'string' or t == 'number' or t == 'boolean'\nextendsNode = (value) -> isFunc(value) and ((value.prototype instanceof Node) or value == Node)\n\n\nnormalizeName = (name) ->\n    name.replace /[A-Z]/g, (name) ->\n        '-' + name.toLowerCase()\n\n\nnormalizeEvent = (type) ->\n    type = type.slice 2\n    type.charAt(0).toLowerCase() + normalizeName type.slice(1)\n\n\n\n\nthrowNodeCfgError = (cfg) ->\n    throw new Error COMP_CFG_ERROR + ' cfg = ' + getCfgJson cfg\n\n\nthrowViewCfgError = (cfg) ->\n    throw new Error VIEW_CFG_ERROR + ' cfg = ' + getCfgJson cfg\n\n\n\n\ngetCfgJson = (cfg) ->\n    try\n        c = JSON.stringify cfg\n    catch\n    c + ''\n\n\n\n\n###\n    cfg as string || boolean || number\n        node is a text node\n\n    cfg as object\n        tag can be\n            string\n                which is mapped to an component class\n                the node name\n            node class\n            node instance\n\n    cfg as node instance # invalid in create\n\n    cfg as func\n\n\n    cfg =\n        tag:\n        text:\n        style:\n        bind\n        clazz:\n        child:\n        children:\n        event handlers starting with 'on', camel case converts to kebab case\n\n\n    update:\n\n        if value == undefined -> no update\n        if value == null      -> remove value\n        else                  -> update\n\n###\n\n\n\n\n\nclass Node\n\n\n    @DEBUG     = true\n    @CHECK_DOM = true\n\n\n\n\n    constructor: (cfg) ->\n        @register(cfg)\n        #console.log 'ctx: ', @ctx\n\n\n    register: (@cfg) ->\n        @parent = null\n        @depth  = 0\n        @keep   = false\n        if not @__id__\n            @__id__ = ++__id__\n            nodeMap[@__id__] = @\n        @__id__\n        injectNode @, @cfg\n\n\n    updateNow: () ->\n        cfg = @render()\n        createView @, cfg if not @view\n        if isSimple(cfg) or (not cfg.tag and (isSimple(cfg.text) or isFunc(cfg.text)))\n            updateText @, cfg\n        else\n            updateProperties @, cfg\n        @\n\n\n    # add nodes view to dom\n    appendTo: (dom) ->\n        @updateNow() if not @view\n        append @, dom\n\n    behind: (dom) ->\n        @updateNow() if not @view\n        behind @, dom\n\n    before: (dom) ->\n        @updateNow() if not @view\n        before @, dom\n\n    replace: (dom) ->\n        @updateNow() if not @view\n        replace @, dom\n\n    remove: (dom) ->\n        @updateNow() if not @view\n        replace @, dom\n\n\n    dispose: () -> null\n\n\n    onMount: () -> null\n\n\n    onUnmount: () -> @keep\n\n\n    needsUpdate: () -> true\n    canUpdate:   (@cfg) -> true\n    update:      () => update @\n    render:      () -> @cfg\n\n\n    onAdded:   () ->\n\n\n    onRemoved: () ->\n\n\n    addChild:       (child) ->\n    addChildAt:     (child, index) ->\n    removeChild:    (child) ->\n    removeChildAt:  (index) ->\n\n\n\n\n#    00000000   00000000    0000000   00000000    0000000\n#    000   000  000   000  000   000  000   000  000     \n#    00000000   0000000    000   000  00000000   0000000 \n#    000        000   000  000   000  000             000\n#    000        000   000   0000000   000        0000000 \n\nclassMap   = {}\nnodeMap    = {}\ndirtyMap   = {}\ncleanMap   = {}\ndomList    = []\ndirty      = false\nrafTimeout = null\n\n\n\n\n#    00     00   0000000   00000000 \n#    000   000  000   000  000   000\n#    000000000  000000000  00000000 \n#    000 0 000  000   000  000      \n#    000   000  000   000  000      \n\nmap = (tag, clazz, overwrite = false) ->\n    if isNot(classMap[tag]) or overwrite\n        classMap[tag] = clazz\n    null\n\n\n\n\n\n#    000   000  000   000  00     00   0000000   00000000 \n#    000   000  0000  000  000   000  000   000  000   000\n#    000   000  000 0 000  000000000  000000000  00000000 \n#    000   000  000  0000  000 0 000  000   000  000      \n#     0000000   000   000  000   000  000   000  000      \n\nunmap = (tag) ->\n    delete classMap[tag]\n    null\n\n\n\n\n#     0000000  00000000   00000000   0000000   000000000  00000000\n#    000       000   000  000       000   000     000     000     \n#    000       0000000    0000000   000000000     000     0000000 \n#    000       000   000  000       000   000     000     000     \n#     0000000  000   000  00000000  000   000     000     00000000\n\ncreate = (cfg, root = null) ->\n    #console.log 'ViewTree.create: ', cfg\n    if isNot cfg\n        throw new Error \"A node can't be created from empty cfg.\"\n        \n    if not extendsNode clazz = cfg.clazz\n        if not extendsNode clazz = cfg.tag\n            clazz = null\n            tag   = cfg.nodeName.toLowerCase() if isDom cfg\n            clazz = classMap[tag] if isString tag = tag or cfg.tag\n    clazz = clazz or ViewTree.DEFAULT_CLASS\n\n    #node = createNode clazz, cfg, inject\n    node = new clazz cfg\n    createView node, node.render()\n\n    if root != null #TODO: node.render() is called twice in this case - bad!!!\n        render(node, root)\n    node\n\n\n\n\n#    000  000   000        000  00000000   0000000  000000000        000   000   0000000   0000000    00000000\n#    000  0000  000        000  000       000          000           0000  000  000   000  000   000  000     \n#    000  000 0 000        000  0000000   000          000           000 0 000  000   000  000   000  0000000 \n#    000  000  0000  000   000  000       000          000           000  0000  000   000  000   000  000     \n#    000  000   000   0000000   00000000   0000000     000           000   000   0000000   0000000    00000000\n\ninjectNode = (node, cfg) ->\n    if isNot(node.__i__) and cfg and cfg.__i__\n        inject    = node.__i__ = cfg.__i__\n        node[key] = value for key, value of inject\n    node\n\n\n\n\n#     0000000  00000000   00000000   0000000   000000000  00000000        000   000  000  00000000  000   000\n#    000       000   000  000       000   000     000     000             000   000  000  000       000 0 000\n#    000       0000000    0000000   000000000     000     0000000          000 000   000  0000000   000000000\n#    000       000   000  000       000   000     000     000                000     000  000       000   000\n#     0000000  000   000  00000000  000   000     000     00000000            0      000  00000000  00     00\n\ncreateView = (node, cfg) ->\n    ###\n    throwViewCfgError(cfg) if isNot cfg\n    text = if isFunc(cfg.text) then cfg.text() else cfg.text\n    if isSimple(cfg) or (not cfg.tag and (isSimple(text)))\n        node.tag  = undefined\n        node.text = if isNot(text) then cfg else text\n        node.view = document.createTextNode node.text\n    else\n        throwViewCfgError(cfg) if not isString(tag = cfg.tag) or tag == ''\n        node.tag  = tag\n        node.view =  document.createElement tag\n    node.view\n    ###\n    if node.view\n        throw new Error \"View already exists\"\n    if isNot cfg = node.render()\n        throw new Error \"A view for an empty cfg can't be created.\"\n    switch true\n        when isSimple  cfg then createTextView    node, node.cfg = text: cfg + ''\n        when isDom     cfg then createTagFromDom  node, null, cfg\n        when isDomText cfg then createTextFromDom node, null, cfg\n        else\n            tag = cfg.tag\n            switch true\n                when isNot     tag then createTextView    node, cfg\n                when isString  tag then createTagView     node, cfg\n                when isDom     tag then createTagFromDom  node, cfg, tag\n                when isDomText tag then createTextFromDom node, cfg, tag\n                else\n                    if extendsNode tag\n                        throw new Error \"A tag must be a string or a HTMLElement, you specified a Node class.\"\n                    throw new Error \"A tag must be a string or a HTMLElement.\"\n\n    domList.push node.view if Node.CHECK_DOM\n    node\n\n\n\n\ncreateTextView = (node, cfg) ->\n    text = cfg.text\n    text = text() if isFunc text\n    if not isSimple text\n        throw new Error \"The text for a text node must be a string, number or bool.\"\n    node.text = text\n    node.tag  = cfg.tag  = null\n    node.kind = Node.TEXT_KIND\n    node.view = document.createTextNode text\n\n\ncreateTextFromDom = (node, cfg, dom) ->\n    checkDom dom if Node.CHECK_DOM\n    node.text = dom.nodeValue\n    node.tag  = null\n    node.kind = Node.TEXT_KIND\n    node.view = dom\n    if cfg\n        text = cfg.text\n        if isNot text\n            cfg.text = node.text\n        else\n            text = text() if isFunc text\n            if not isSimple text\n                throw new Error \"The text for a text node must be a string, number or bool.\"\n            node.text = dom.nodeValue = text\n    else\n        cfg = node.cfg = text: node.text\n    cfg.tag = null\n    node\n\n\ncreateTagView = (node, cfg) ->\n    node.tag  = tag = cfg.tag\n    node.kind = Node.TAG_KIND\n    node.view = document.createElement tag\n    node\n\n\ncreateTagFromDom = (node, cfg, dom) ->\n    checkDom dom if Node.CHECK_DOM\n    node.tag  = dom.nodeName.toLowerCase()\n    node.kind = Node.TAG_KIND\n    node.view = dom\n    cfg       = cfg or node.cfg = {}\n    cfg.tag   = node.tag\n    node\n\n\n\n#    00000000   00000000  000   000  0000000    00000000  00000000 \n#    000   000  000       0000  000  000   000  000       000   000\n#    0000000    0000000   000 0 000  000   000  0000000   0000000  \n#    000   000  000       000  0000  000   000  000       000   000\n#    000   000  00000000  000   000  0000000    00000000  000   000\n\nrender = (node, root) ->\n    #console.log 'ViewTree.render: ', node, root\n    cfg = node.render()\n    if not node.view\n        createView node, cfg\n\n    root.appendChild(node.view)\n\n    node.parent = null\n    node.depth  = 0\n\n    if isSimple(cfg) or isNot(cfg.tag)\n        updateText node, cfg\n    else\n        updateProperties node, cfg\n\n    node.onMount()\n    null\n\n\n\n\n#    00000000   00000000  00     00   0000000   000   000  00000000\n#    000   000  000       000   000  000   000  000   000  000     \n#    0000000    0000000   000000000  000   000   000 000   0000000 \n#    000   000  000       000 0 000  000   000     000     000     \n#    000   000  00000000  000   000   0000000       0      00000000\n\nremove = (nodeOrRoot) ->\n\n\n\n\n#    000   000  00000000   0000000     0000000   000000000  00000000\n#    000   000  000   000  000   000  000   000     000     000     \n#    000   000  00000000   000   000  000000000     000     0000000 \n#    000   000  000        000   000  000   000     000     000     \n#     0000000   000        0000000    000   000     000     00000000\n\nupdate = (node) ->\n    #console.log 'UPDATE: ', node.__id__\n    id = node?.__id__\n    if not id\n        throw new Error \"DOM ERROR: can't update node. Node doesn't exist. cfg = \" + getCfgJson(node?.cfg or null)\n\n    if not dirty\n        window.cancelAnimationFrame rafTimeout\n        rafTimeout = window.requestAnimationFrame updateNow\n\n    dirtyMap[id] = true\n    dirty        = true\n    null\n\n\n\n\n#    000   000  00000000   0000000     0000000   000000000  00000000        000   000   0000000   000   000\n#    000   000  000   000  000   000  000   000     000     000             0000  000  000   000  000 0 000\n#    000   000  00000000   000   000  000000000     000     0000000         000 0 000  000   000  000000000\n#    000   000  000        000   000  000   000     000     000             000  0000  000   000  000   000\n#     0000000   000        0000000    000   000     000     00000000        000   000   0000000   00     00\n\nupdateNow = () ->\n    #console.log 'UPDATE NOW: '\n    window.cancelAnimationFrame rafTimeout\n    dirty    = false\n    cleanMap = {}\n    nodes    = []\n    #TODO: sort by depth to update top down\n    (nodes.push(n) if n = nodeMap[id]) for id of dirtyMap\n    nodes.sort (a, b) -> a.depth - b.depth\n    for node in nodes\n        continue if not node.view or not nodeMap[node.__id__] or cleanMap[node.__id__]\n        cfg = node.render()\n\n        #if node.constructor.name == 'Check'\n        #console.log 'update node now: ', node.constructor.name, node.depth, node.__id__, node.view, cleanMap\n\n        if isNot(node.tag) and isNot(cfg.tag)\n            updateText node, cfg\n        else if not (node.tag == cfg.tag or node.constructor == cfg.tag)\n            replaceChild node, cfg\n        else\n            updateProperties node, cfg\n    dirtyMap = {}\n    null\n\n\n\n\n#    000   000  00000000   0000000     0000000   000000000  00000000        000000000  00000000  000   000  000000000\n#    000   000  000   000  000   000  000   000     000     000                000     000        000 000      000   \n#    000   000  00000000   000   000  000000000     000     0000000            000     0000000     00000       000   \n#    000   000  000        000   000  000   000     000     000                000     000        000 000      000   \n#     0000000   000        0000000    000   000     000     00000000           000     00000000  000   000     000   \n\nupdateText = (node, cfg) ->\n    cleanMap[node.__id__] = true\n    text = if isFunc(cfg.text) then cfg.text() else if isString(cfg) then cfg else cfg.text\n    if node.text != text\n        node.cfg            = cfg\n        node.text           = text\n        node.view.nodeValue = text\n    null\n\n\n\n\n#    000   000  00000000   0000000     0000000   000000000  00000000        00000000   00000000    0000000   00000000    0000000\n#    000   000  000   000  000   000  000   000     000     000             000   000  000   000  000   000  000   000  000     \n#    000   000  00000000   000   000  000000000     000     0000000         00000000   0000000    000   000  00000000   0000000 \n#    000   000  000        000   000  000   000     000     000             000        000   000  000   000  000             000\n#     0000000   000        0000000    000   000     000     00000000        000        000   000   0000000   000        0000000 \n\nupdateProperties = (node, cfg) ->\n    cleanMap[node.__id__] = true\n    #console.log 'UPDATE PROPS: ', node.__id__, node.view\n    cfg     = cfg.render() if cfg instanceof Node\n    attrs   = node.attrs or node.attrs = {}\n    propMap = Object.assign {}, attrs, node.events, cfg\n\n    if propMap.hasOwnProperty 'className'\n        updateClass node, cfg.className\n\n    if propMap.hasOwnProperty 'style'\n        updateStyle node, cfg.style\n\n    if propMap.hasOwnProperty 'text'\n        text = text() if isFunc text = cfg.text\n        if isSimple text\n            updateChildren node, [text]\n        else if isDomText text\n            updateChildren node, [text]\n\n        if Node.DEBUG\n            if cfg.hasOwnProperty 'child'\n                console.warn 'child specified while text exists: ', cfg\n            if cfg.hasOwnProperty 'children'\n                console.warn 'children specified while text exists', cfg\n\n    else if propMap.hasOwnProperty 'child'\n        child = child() if isFunc child = cfg.child\n        updateChildren node, [child]\n\n        if Node.DEBUG\n            if cfg.hasOwnProperty 'children'\n                console.warn 'children specified while text exists', cfg\n\n    else if propMap.hasOwnProperty 'children'\n        updateChildren node, cfg.children\n\n    delete propMap.tag\n    delete propMap.clazz\n    delete propMap.__i__\n    delete propMap.keep\n    delete propMap.text\n    delete propMap.child\n    delete propMap.className\n    delete propMap.style\n    delete propMap.children\n    delete propMap.bindings\n\n    for name of propMap\n        attr  = attrs[name]\n        value = cfg[name]\n\n        if isBool(value) or (isNot(value) and isBool(attr))\n            updateBool node, value, name\n        else\n            if /^on/.test name\n                updateEvent node, value, name\n            else\n                value = value() if isFunc value\n                if isBool value\n                    updateBool node, value, name\n                else\n                    updateAttr node, value, name\n    null\n\n\n\n\n\n\n\n\n#     0000000   000000000  000000000  00000000    0000000\n#    000   000     000        000     000   000  000\n#    000000000     000        000     0000000    0000000\n#    000   000     000        000     000   000       000\n#    000   000     000        000     000   000  0000000\n\nupdateAttr = (node, value, name) ->\n    #console.log 'updateAttr: ', name, value, node.attrs[name], node.__id__\n    node.attrs[name] = node.view.getAttribute name\n    return if node.attrs[name] == value\n    view = node.view\n    if value != null and value != undefined\n        view.setAttribute name, value\n        view[name]       = value\n        node.attrs[name] = value\n    else\n        view.removeAttribute name\n        delete view[name]\n        delete node.attrs[name]\n    null\n\n\n\n\n#    0000000     0000000    0000000   000\n#    000   000  000   000  000   000  000\n#    0000000    000   000  000   000  000\n#    000   000  000   000  000   000  000\n#    0000000     0000000    0000000   0000000\n\nupdateBool = (node, value, name) ->\n    node.attrs[name] = node.view[name]\n    return if node.attrs[name] == value\n    view = node.view\n    if isNot value\n        view.removeAttribute name\n        view[name] = false\n        delete node.attrs[name]\n    else if  value == false\n        view.removeAttribute name\n        view[name]       = false\n        node.attrs[name] = false\n    else\n        view.setAttribute name, ''\n        view[name]       = true\n        node.attrs[name] = true\n    null\n\n\n\n\n#     0000000  000       0000000    0000000   0000000\n#    000       000      000   000  000       000\n#    000       000      000000000  0000000   0000000\n#    000       000      000   000       000       000\n#     0000000  0000000  000   000  0000000   0000000\n\nupdateClass = (node, value) ->\n    value = value() if isFunc value\n\n    node.attrs.className = node.view.className\n    return if node.attrs.className == value\n    if value\n        node.view.className  = value\n        node.attrs.className = value\n    else\n        node.view.className  = undefined\n        delete node.attrs.className\n    null\n\n\n\n\n#     0000000  000000000  000   000  000      00000000\n#    000          000      000 000   000      000\n#    0000000      000       00000    000      0000000\n#         000     000        000     000      000\n#    0000000      000        000     0000000  00000000\n\nupdateStyle = (node, style) ->\n    view  = node.view\n    attrs = node.attrs\n    sobj  = attrs.style\n\n    return if not view\n\n    style = style() if isFunc style\n\n    if isNot style\n        view.style.cssText = null\n        delete attrs.style\n\n    else if isString style\n        view.style.cssText = style\n        attrs.style        = style\n    else\n        css     = ''\n        sobj    = if isObject(sobj) then sobj else {}\n        changed = false\n        propMap = Object.assign {}, style, sobj\n        for name of propMap\n            value = style[name]\n            if value != sobj[name]\n                changed = true\n            sobj[name] = value\n            if isNot value\n                delete sobj[name]\n            else\n                prop  = normalizeName name\n                css  += prop + ': ' + value + '; '\n\n        if changed\n            if css.length\n                css                = css.slice 0, -1\n                view.style.cssText = css\n                attrs.style        = sobj\n            else\n                view.style.cssText = null\n                delete attrs.style\n    null\n\n\n\n\n#    00000000  000   000  00000000  000   000  000000000   0000000\n#    000       000   000  000       0000  000     000     000\n#    0000000    000 000   0000000   000 0 000     000     0000000\n#    000          000     000       000  0000     000          000\n#    00000000      0      00000000  000   000     000     0000000\n\nupdateEvent = (node, callback, name) ->\n    events    = node.events or node.events = {}\n    view      = node.view\n    type      = normalizeEvent name\n    listener  = events[name]\n\n    if isString callback\n        callback = node[name]\n\n    if listener != callback\n        if listener\n            view.removeEventListener(type, listener)\n            delete events[name]\n        if callback\n            view.addEventListener(type, callback)\n            events[name] = callback\n    null\n\n\nremoveEvents = (node) ->\n    events = node.events\n    return null if not events\n\n    view = node.view\n    for name, listener of events\n        type = normalizeEvent name\n        view.removeEventListener(type, listener) if listener\n        delete events[name]\n    node.events = null\n    null\n\n\n\n\n#     0000000  000   000  000  000      0000000    00000000   00000000  000   000\n#    000       000   000  000  000      000   000  000   000  000       0000  000\n#    000       000000000  000  000      000   000  0000000    0000000   000 0 000\n#    000       000   000  000  000      000   000  000   000  000       000  0000\n#     0000000  000   000  000  0000000  0000000    000   000  00000000  000   000\n\nupdateChildren = (node, cfgs) ->\n    #TODO: allow object as only child\n    children = node.children or node.children = []\n    cfgs     = cfgs() if isFunc cfgs\n    cfgs     = if isString(cfgs) then [cfgs] else cfgs or []\n    l        = if children.length > cfgs.length then children.length else cfgs.length\n    for i in [0...l]\n        child = children[i]\n        cfg   = cfgs[i]\n        cfg   = cfg() if isFunc cfg\n\n        if not child and not cfg\n            throw new Error \"DOM ERROR: either child or cfg at index #{i} must be defined. Got \" + child + ', ' + cfg\n        if not child\n            addChild node, cfg\n        else if not cfg\n            removeChild child\n        else\n            change child, cfg\n    children.length = cfgs.length\n    null\n\n\n\n\n#     0000000  000   000   0000000   000   000   0000000   00000000\n#    000       000   000  000   000  0000  000  000        000\n#    000       000000000  000000000  000 0 000  000  0000  0000000\n#    000       000   000  000   000  000  0000  000   000  000\n#     0000000  000   000  000   000  000   000   0000000   00000000\n\nchange = (node, cfg) ->\n    needsUpdate = node.needsUpdate()\n    if node == cfg or node.constructor == cfg.tag\n        updateProperties node, node.render() if needsUpdate\n        replaceChild     node, node.render() if needsUpdate\n\n        # node don't wants to be updated\n\n    else if node.tag != cfg.tag or cfg instanceof Node\n        replaceChild node, cfg\n\n    else if node.tag == undefined # text node\n        updateText node, cfg\n\n    else if needsUpdate and canUpdate # tag node\n        updateProperties node, cfg\n\n    false\n\n\n\n\n#     0000000   0000000    0000000\n#    000   000  000   000  000   000\n#    000000000  000   000  000   000\n#    000   000  000   000  000   000\n#    000   000  0000000    0000000\n\naddChild = (node, cfg) ->\n    if cfg instanceof Node\n        child = cfg\n    else\n        cfg.__i__ = node.__i__ if not cfg.__i__\n        child = create cfg\n\n    cfg = child.render()\n    child.updateNow() if not child.view\n\n    node.children.push child\n    node.view.appendChild child.view\n    child.parent = node\n    child.depth  = node.depth + 1\n    child.onMount()\n    null\n\n\n\n\n#    00000000   00000000  00     00   0000000   000   000  00000000\n#    000   000  000       000   000  000   000  000   000  000\n#    0000000    0000000   000000000  000   000   000 000   0000000\n#    000   000  000       000 0 000  000   000     000     000\n#    000   000  00000000  000   000   0000000       0      00000000\n\nremoveChild = (child) ->\n    #TODO: node.children currently not handled -> handled by changing node.children.length in updateChildren\n\n    #console.log 'removeChild: ', child, node\n\n    node = child.parent\n    view = child.view\n    disposeNode child\n    node.view.removeChild view\n    null\n\n\n\n\n#    00000000   00000000  00000000   000       0000000    0000000  00000000\n#    000   000  000       000   000  000      000   000  000       000\n#    0000000    0000000   00000000   000      000000000  000       0000000\n#    000   000  000       000        000      000   000  000       000\n#    000   000  00000000  000        0000000  000   000   0000000  00000000\n\nreplaceChild = (child, cfg) ->\n    #console.log 'ViewTree.replaceChild: ', child, cfg\n    node     = child.parent\n    children = node.children\n    i        = children.indexOf child\n    view     = child.view\n\n    disposeNode child\n\n    if cfg instanceof Node\n        child = cfg\n        cfg   = child.render()\n    else\n        cfg.__i__ = node.__i__ if not cfg.__i__\n        child = create cfg\n\n    cfg = child.render()\n    if not child.view\n        child.view = createView child, cfg\n\n    children[i]  = child\n    child.parent = node\n    child.depth  = node.depth + 1\n    node.view.replaceChild child.view, view\n\n    if isSimple(cfg) or (not cfg.tag and (isSimple(cfg.text) or isFunc(cfg.text)))\n        updateText child, cfg\n    else\n        updateProperties child, cfg\n\n    child.onMount()\n    #console.log 'DOM.replaceChild: create = ', child, cfg\n    null\n\n\n\n\n#    0000000    000   0000000  00000000    0000000    0000000  00000000\n#    000   000  000  000       000   000  000   000  000       000\n#    000   000  000  0000000   00000000   000   000  0000000   0000000\n#    000   000  000       000  000        000   000       000  000\n#    0000000    000  0000000   000         0000000   0000000   00000000\n\ndisposeNode = (node) ->\n    #console.log 'disposeNode: ', node\n    if node.onUnmount() != true\n\n        #console.log 'dispose node now: ', node\n        removeEvents node\n\n        if node.children and node.children.length\n            disposeNode child for child in node.children\n\n        delete node.children\n        delete node.view\n        delete nodeMap[node.__id__]\n\n    node.parent = null\n    node.depth  = undefined\n    null\n\n\n\n\ncheckDom = (dom) ->\n    if domList.indexOf(dom) > -1\n        throw new Error 'Dom element already controlled by another node.'\n\n\nappend = (node, dom) ->\n    checkDom dom if Node.CHECK_DOM\n    dom.appendChild node.view\n\n\n\nbehind = (node, dom) ->\n    parent = dom.parentNode\n    next   = dom.nextSibling\n    checkDom parent if Node.CHECK_DOM\n    if next\n        parent.insertBefore node.view, next\n    else\n        parent.appendChild node.view\n\n\nbefore = (node, dom) ->\n    parent = dom.parentNode\n    checkDom parent if Node.CHECK_DOM\n    parent.insertBefore node.view, dom\n\n\nreplace = (node, dom) ->\n    parent = dom.parentNode\n    if Node.CHECK_DOM\n        checkDom parent\n        checkDom dom\n    parent.replaceChild node.view, dom\n\n\nremove = (node) ->\n    parent = node.view.parentNode\n    checkDom parent if Node.CHECK_DOM\n    parent.removeChild node.view\n\n\n\n\n\n\n\n\n#    00000000    0000000   00000000\n#    000   000  000   000  000\n#    0000000    000000000  000000\n#    000   000  000   000  000\n#    000   000  000   000  000\n\nif typeof window != 'undefined'\n    lastTime = 0\n    vendors  = ['webkit', 'moz']\n    for vendor in vendors\n        break if window.requestAnimationFrame\n        window.requestAnimationFrame = window[vendor + 'RequestAnimationFrame']\n        window.cancelAnimationFrame  = window[vendor + 'CancelAnimationFrame' ] or window[vendor + 'CancelRequestAnimationFrame']\n\n\n    if not window.requestAnimationFrame\n        window.requestAnimationFrame = (callback) ->\n            currTime   = Date.now()\n            timeToCall = Math.max 0, 16 - currTime + lastTime\n            rAF        = () -> callback currTime + timeToCall\n            id         = window.setTimeout rAF, timeToCall\n            lastTime   = currTime + timeToCall\n            id\n\n\n    if not window.cancelAnimationFrame\n        window.cancelAnimationFrame = (id) ->\n            clearTimeout id\n            null\n\n\n\n\n#     0000000    0000000   0000000  000   0000000   000   000\n#    000   000  000       000       000  000        0000  000\n#    000000000  0000000   0000000   000  000  0000  000 0 000\n#    000   000       000       000  000  000   000  000  0000\n#    000   000  0000000   0000000   000   0000000   000   000\n\nif typeof Object.assign == 'undefined'\n    Object.assign = (target, args...) ->\n        for src in args\n            for key of src\n                target[key] = src[key];\n        target\n\n\n\n\nNode.create      = create\nNode.map         = map\nNode.unmap       = unmap\n\nNode.append      = append\nNode.behind      = behind\nNode.before      = before\nNode.replace     = replace\nNode.remove      = remove\n\nNode.getOrCall   = getOrCall\nNode.isBool      = isBool\nNode.isNumber    = isNumber\nNode.isString    = isString\nNode.isObject    = isObject\nNode.isFunc      = isFunc\nNode.isDom       = isDom\nNode.isDomText   = isDomText\nNode.isNot       = isNot\nNode.isSimple    = isSimple\nNode.extendsNode = extendsNode\n\n\nViewTree =\n    Node:             Node\n    DEFAULT_CLASS:    Node\n    HANDLE_CTX:       true\n    HANDLE_DATA_TREE: true\n    COMP_CFG_ERROR:   COMP_CFG_ERROR\n    VIEW_CFG_ERROR:   VIEW_CFG_ERROR\n    map:              map\n    unmap:            unmap\n    create:           create\n    render:           render\n    remove:           remove\n    update:           update\n    updateNow:        updateNow\n\n\n\n\nif typeof module != 'undefined'\n    module.exports = ViewTree\nif typeof window != 'undefined'\n    window.ViewTree = ViewTree\nelse\n    this.ViewTree = ViewTree"]}}]}