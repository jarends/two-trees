// Generated by CoffeeScript 1.12.6
(function() {
  var AppView, ViewNode,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  ViewNode = require('../two-trees').ViewNode;

  AppView = (function(superClass) {
    extend(AppView, superClass);

    function AppView(cfg) {
      AppView.__super__.constructor.call(this, cfg);
    }

    AppView.prototype.updateCfg = function(cfg) {
      AppView.__super__.updateCfg.call(this, cfg);
      return this.data = this.tree.root;
    };

    AppView.prototype.render = function() {
      return {
        tag: 'div',
        children: [
          {
            tag: 'h1',
            className: 'my-class',
            onClick: (function(_this) {
              return function() {
                ++_this.data.clicks;
                _this.data.bgGreen = (Math.random() * 100 + 155) >> 0;
                return _this.tree.update();
              };
            })(this),
            children: [
              {
                tag: 'div',
                style: (function(_this) {
                  return function() {
                    return "padding: 20px; background-color: rgb(0," + _this.data.bgGreen + ",0);";
                  };
                })(this),
                bindings: [[this.data, 'bgGreen'], [this.data, 'clicks']],
                children: (function(_this) {
                  return function() {
                    if (_this.data.clicks) {
                      return _this.data.title + (" clicks: " + _this.data.clicks);
                    } else {
                      return _this.data.title + ' click me!';
                    }
                  };
                })(this)
              }
            ]
          }, {
            tag: 'button',
            disabled: (function(_this) {
              return function() {
                return _this.data.clicks === 0;
              };
            })(this),
            onClick: (function(_this) {
              return function() {
                return _this.tree.undo();
              };
            })(this),
            bindings: [[this.data, 'clicks']],
            children: 'undo'
          }, {
            tag: 'button',
            disabled: (function(_this) {
              return function() {
                return _this.data.clicks >= _this.tree.history.length;
              };
            })(this),
            onClick: (function(_this) {
              return function() {
                return _this.tree.redo();
              };
            })(this),
            bindings: [[this.data, 'clicks']],
            children: 'redo'
          }
        ]
      };
    };

    return AppView;

  })(ViewNode);

  module.exports = AppView;

}).call(this);

//# sourceMappingURL=app-view.js.map
